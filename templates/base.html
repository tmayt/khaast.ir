{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>خواست</title>
        <link href="{% static 'bootstrap.min.css' %}" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        {% block head %}{% endblock head %}
            
    </head>
    <body dir="rtl">
    
    <main class="container">
        <div class="bg-light rounded mt-3">
            {% block content %}{% endblock content %}
        </div>
    </main>
    <nav class="navbar fixed-bottom navbar-expand-sm navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url "home" %}">خواست</a>
            <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbarCollapse" style="">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="handleNewRequest()">درخواست جدید</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="handleEmergency()">شرایط اضطراری</a>
                </li>
            </ul>
            </div>
        </div>
    </nav>
    <script src="{% static 'sweetalert2.js' %}"></script>

    <script>
    function handleNewRequest() {
    Swal.fire({
        title: 'درخواست جدید',
        html:
        '<input id="swal-title" class="swal2-input" placeholder="عنوان">' +
        '<textarea id="swal-description" class="swal2-textarea" placeholder="توضیحات"></textarea>',
        showCancelButton: true,
        confirmButtonText: 'ارسال',
        cancelButtonText: 'انصراف',
        focusConfirm: false,
        preConfirm: () => {
        const title = document.getElementById('swal-title').value.trim();
        const description = document.getElementById('swal-description').value.trim();

        if (!title || !description) {
            Swal.showValidationMessage('لطفاً عنوان و توضیحات را وارد کنید');
            return false;
        }

        // You can use AJAX here to send title & description to your Django backend
        return { title, description };
        }
    }).then((result) => {
        if (result.isConfirmed) {
        console.log("New post submitted:", result.value);
        Swal.fire('با موفقیت ارسال شد!', '', 'success');
        }
    });
    }

    function handleEmergency() {
    Swal.fire({
        title: 'شرایط اضطراری',
        text: 'آیا از انجام این عملیات اضطراری اطمینان دارید؟',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'بله، ادامه بده',
        cancelButtonText: 'انصراف'
    }).then((result) => {
        if (result.isConfirmed) {
        // You can trigger your emergency logic here
        Swal.fire('درخواست اضطراری ثبت شد', '', 'success');
        }
    });
    }
    </script>
    <script src="{% static 'bootstrap.bundle.min.js' %}"></script>
    {% block script %}{% endblock script %}
    </body>
</html>